alias code='flatpak run com.visualstudio.code'
alias google-chrome='flatpak run com.google.Chrome'

#Shortcut for 'docker run -it --rm <image> <optional additional args>
#Run as 'drun <image> <optional additional args>'
function drun() {
    image=$1

    if [ $2 ]; then
        command=${@:2}
    else
        command=/bin/bash
    fi
    
    xhost +
    
    docker run -it --rm \
        --privileged \
        --network=host \
        $image \
        $command \
    
    xhost -
}

#Shortcut for 'podman run -it --rm <image> <optional additional args>
#Run as 'prun <image> <optional additional args>'
function prun() {
    image=$1

    if [ $2 ]; then
        podman run -it --rm $image ${@:2}
    else
        podman run -it --rm $image /bin/bash
    fi
}

#Shortcut for distrobox create when used to create an ubuntu image.
#Automatically installs and configures vs code in the image
#Run as 'distrobox-create-ubuntu <image> <name> <optional additional args>'
function distrobox-create-ubuntu() {
    image=$1
    name=$2

    if ! [ $name ]; then
        echo Please specify at least two arguments:
        echo distrobox-create-ubuntu image name
        return 0
    fi

    distrobox create -i $image -n $name -H ~/homes/$name ${@:3}

    #Confirm that the new home was created.
    if ! [ -d ~/homes/$name ]; then
        return 0
    fi


    #Install vs code in container
    cd ~/homes/$name
    wget "https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64"
    mv 'download?build=stable&os=linux-deb-x64' code.deb
    distrobox enter $name -nw -- sudo apt install -y ./code.deb
    rm code.deb 

    #Install custom keyboard bindings for vs code
    mkdir -p ~/homes/${name}/.config/Code/User
    cp ~/.var/app/com.visualstudio.code/config/Code/User/keybindings.json ~/homes/${name}/.config/Code/User
    cp ~/.var/app/com.visualstudio.code/config/Code/User/container_settings.json ~/homes/${name}/.config/Code/User/settings.json

}